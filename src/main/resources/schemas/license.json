{
  "$id": "resource:/schemas/license.json",
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "License",
  "description": "An object that links to an open source license. Public Domain, Creative Commons, GNU, Apache, MIT and BSD are allowed",
  "type": "object",
  "properties": {
    "isPartOf": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uri",
          "enum": [
            "https://w3id.org/kim/license/publicDomain",
            "https://w3id.org/kim/license/attribution",
            "https://w3id.org/kim/license/shareAlike",
            "https://w3id.org/kim/license/noDerivatives",
            "https://w3id.org/kim/license/nonCommercial",
            "https://w3id.org/kim/license/nonCommercial-noDerivatives"
          ]
        },
        "type": {
          "type": "string",
          "enum": [
            "Collection"
          ]
        }
      }
    },
    "id": {
      "type": "string",
      "format": "uri",
      "oneOf": [
        {
          "description": "Creative Commons License or Public Domain",
          "pattern": "^http[s]?:\/\/creativecommons.org\/(licenses|licences|publicdomain)\/.*"
        },
        {
          "description": "GNU License",
          "pattern": "^http[s]?:\/\/www.gnu.org\/licenses\/.*"
        },
        {
          "description": "Apache License",
          "pattern": "^http[s]?:\/\/www.apache.org\/licenses\/.*"
        },
        {
          "description": "MIT License",
          "pattern": "http[s]?://opensource.org/licenses/MIT"
        },
        {
          "description": "BSD License",
          "pattern": "^http[s]?:\/\/www.opensource.org\/licenses\/BSD.*"
        }
      ],
      "oneOf": [
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "^http[s]?://creativecommons.org/publicdomain/zero/1.0|http[s]?://creativecommons.org/publicdomain/mark/1.0"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "type": "object",
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/publicDomain"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "^http[s]?:\/\/creativecommons.org\/licenses\/by\/.*|http[s]?:\/\/www.gnu.org\/licenses\/fdl-.*|http[s]?:\/\/opensource.org\/licenses\/MIT|http[s]?:\/\/apache.org\/licenses\/.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "type": "object",
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/attribution"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "^http[s]?:\/\/creativecommons.org\/licenses\/by-sa\/.*|http[s]?:\/\/www.gnu.org\/licenses\/gpl-.*|http[s]?:\/\/www.gnu.org\/licenses\/lgpl-.*|http[s]?:\/\/www.gnu.org\/licenses\/agpl-.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/shareAlike"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "^http[s]?:\/\/creativecommons.org\/licenses\/by-sa\/.*|http[s]?:\/\/www.gnu.org\/licenses\/gpl-.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/shareAlike"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "^http[s]?:\/\/creativecommons.org\/licenses\/by-nd\/.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/noDerivatives"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "http[s]?:\/\/creativecommons.org\/licenses\/by-nc\/.*|http[s]?:\/\/creativecommons.org\/licenses\/by-nc-sa\/.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/nonCommercial"
                    ]
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "id": {
                "pattern": "http[s]?:\/\/creativecommons.org\/licenses\/by-nc-nd\/.*"
              }
            }
          },
          "then": {
            "properties": {
              "isPartOf": {
                "properties": {
                  "id": {
                    "enum": [
                      "https://w3id.org/kim/license/nonCommercial-noDerivatives"
                    ]
                  }
                }
              }
            }
          }
        }
      ]
    }
  },
  "required": [
    "id",
    "isPartOf"
  ]
}